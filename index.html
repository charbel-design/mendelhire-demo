<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MendelHire - Proof-First Hiring Platform</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a1628;
      --bg-card: rgba(255, 255, 255, 0.03);
      --bg-card-hover: rgba(255, 255, 255, 0.06);
      --border-subtle: rgba(255, 255, 255, 0.06);
      --border-hover: rgba(75, 147, 255, 0.25);
      --accent: #4B93FF;
      --accent-glow: rgba(75, 147, 255, 0.15);
      --success: #5CD6C8;
      --warning: #E5B84C;
      --text-primary: #f0f4f8;
      --text-secondary: #94a3b8;
      --text-muted: #64748B;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; font-family: 'Inter', sans-serif; background: var(--bg-primary); color: var(--text-primary); font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11'; }
    #app { display: flex; height: 100vh; overflow: hidden; }

    /* ===== SIDEBAR ===== */
    .sidebar {
      width: 240px;
      background: rgba(13, 17, 23, 0.95);
      backdrop-filter: blur(20px);
      border-right: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      flex-direction: column;
      transition: width 0.3s ease;
      z-index: 100;
    }
    .sidebar.collapsed { width: 64px; }
    .sidebar-top { padding: 28px 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.05); }
    .sidebar.collapsed .sidebar-top { padding: 20px; display: flex; align-items: center; justify-content: center; }
    .logo {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      letter-spacing: -0.02em;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .logo-icon {
      width: 28px;
      height: 28px;
      flex-shrink: 0;
      filter: drop-shadow(0 0 8px rgba(75, 147, 255, 0.3));
    }
    .sidebar.collapsed .logo { font-size: 24px; }
    .nav { flex: 1; padding: 24px 0; display: flex; flex-direction: column; gap: 6px; }
    .sidebar.collapsed .nav { padding: 20px 0; align-items: center; }
    .nav-item {
      padding: 12px 16px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      font-weight: 500;
      border-radius: 8px;
      margin: 0 8px;
      border-left: 3px solid transparent;
    }
    .sidebar.collapsed .nav-item { padding: 12px; justify-content: center; gap: 0; margin: 4px 0; border-left: none; }
    .nav-item:hover {
      color: var(--text-primary);
      background: rgba(59, 130, 246, 0.1);
      transform: scale(1.01);
    }
    .nav-item.active {
      color: var(--accent);
      background: linear-gradient(135deg, rgba(75,147,255,0.15), rgba(75,147,255,0.05));
      border-left: 3px solid var(--accent);
    }
    .sidebar.collapsed .nav-item.active { border-left: none; background: rgba(59, 130, 246, 0.15); }
    .nav-icon { width: 20px; height: 20px; text-align: center; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
    .sidebar.collapsed .nav-text { display: none; }
    .sidebar-bottom { padding: 20px; border-top: 1px solid rgba(255, 255, 255, 0.05); }
    .user-card {
      padding: 16px;
      background: linear-gradient(135deg, rgba(75,147,255,0.1), rgba(75,147,255,0.05));
      border: 1px solid rgba(75,147,255,0.15);
      border-radius: 12px;
      text-align: center;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .user-card:hover { background: linear-gradient(135deg, rgba(75,147,255,0.15), rgba(75,147,255,0.08)); }
    .sidebar.collapsed .user-card { padding: 12px; }
    .user-card-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--accent-glow);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
      margin: 0 auto 12px;
    }
    .sidebar.collapsed .user-card-avatar { margin: 0; }
    .user-card-name { font-size: 14px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
    .sidebar.collapsed .user-card-name { display: none; }
    .user-card-org { font-size: 12px; color: var(--text-muted); }
    .sidebar.collapsed .user-card-org { display: none; }
    .toggle-sidebar {
      width: 100%;
      padding: 8px;
      background: transparent;
      border: none;
      color: #94a3b8;
      cursor: pointer;
      transition: all 0.2s ease;
      border-radius: 8px;
      font-size: 12px;
    }
    .toggle-sidebar:hover { color: #f0f4f8; background: rgba(255, 255, 255, 0.05); }

    /* ===== MAIN CONTENT ===== */
    .main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
    .topbar {
      padding: 16px 28px;
      background: rgba(13, 17, 23, 0.7);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 20px;
    }
    .topbar-title { font-size: 20px; font-weight: 800; color: var(--text-primary); letter-spacing: -0.02em; }
    .topbar-actions { display: flex; gap: 12px; align-items: center; }
    .topbar-search {
      padding: 10px 16px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 8px;
      color: #f0f4f8;
      width: 240px;
      font-size: 14px;
      transition: all 0.2s ease;
    }
    .topbar-search:focus { outline: none; background: rgba(255, 255, 255, 0.08); border-color: rgba(75, 147, 255, 0.3); }
    .icon-btn {
      width: 36px;
      height: 36px;
      border: none;
      background: rgba(255, 255, 255, 0.06);
      border-radius: 8px;
      color: #94a3b8;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .icon-btn:hover { background: rgba(59, 130, 246, 0.15); color: #4B93FF; }
    .content { flex: 1; overflow-y: auto; padding: 28px; }
    .page { display: none; }
    .page.active { display: block; animation: fadeRise 0.3s cubic-bezier(0.4, 0, 0.2, 1); }

    @keyframes fadeRise {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ===== DASHBOARD PAGE ===== */
    .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin-bottom: 32px; }
    .metric-card {
      padding: 24px;
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05);
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      border-left: 3px solid transparent;
      overflow: hidden;
    }
    .metric-card:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-hover);
      border-left-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 8px 24px rgba(0,0,0,0.3);
    }
    .metric-label { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px; font-weight: 600; }
    .metric-value { font-size: 32px; font-weight: 800; color: var(--accent); margin-bottom: 8px; letter-spacing: -0.02em; }
    .metric-change { font-size: 13px; color: var(--success); }
    .metric-sparkline { height: 30px; margin-top: 12px; position: relative; }
    .activity-feed { margin-bottom: 32px; }
    .activity-title { font-size: 16px; font-weight: 700; color: #f0f4f8; margin-bottom: 16px; }
    .activity-item {
      padding: 16px;
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      margin-bottom: 12px;
      display: flex;
      gap: 16px;
      align-items: flex-start;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }
    .activity-item:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-hover);
      transform: translateY(-2px);
    }
    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--accent-glow);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      font-weight: 700;
      color: var(--accent);
      font-size: 14px;
    }
    .activity-icon.success { background: rgba(92, 214, 200, 0.15); color: var(--success); }
    .activity-icon.warning { background: rgba(229, 184, 76, 0.15); color: var(--warning); }
    .activity-icon svg { width: 16px; height: 16px; }
    .activity-content { flex: 1; }
    .activity-text { font-size: 14px; color: #f0f4f8; margin-bottom: 4px; }
    .activity-time { font-size: 12px; color: #64748B; }

    /* ===== CHALLENGES PAGE ===== */
    .challenges-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
    .challenge-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
    .challenge-card {
      padding: 24px;
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05);
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }
    .challenge-card:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-hover);
      transform: translateY(-4px);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 12px 28px rgba(75, 147, 255, 0.15);
    }
    .challenge-type { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; font-weight: 600; }
    .challenge-title { font-size: 18px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; letter-spacing: -0.02em; }
    .challenge-desc { font-size: 13px; color: #94a3b8; margin-bottom: 16px; line-height: 1.5; }
    .challenge-stats { display: flex; justify-content: space-between; margin-bottom: 16px; padding: 12px 0; border-top: 1px solid rgba(255, 255, 255, 0.05); border-bottom: 1px solid rgba(255, 255, 255, 0.05); }
    .challenge-stat { text-align: center; }
    .challenge-stat-label { font-size: 11px; color: #64748B; margin-bottom: 4px; }
    .challenge-stat-value { font-size: 16px; font-weight: 700; color: #f0f4f8; }
    .challenge-section { margin-bottom: 24px; }
    .challenge-section-title { font-size: 13px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px; }
    .challenge-section ul { list-style: none; margin-left: 0; }
    .challenge-section li { padding: 8px 0; font-size: 14px; color: #f0f4f8; }
    .challenge-section li:before { content: "• "; color: #4B93FF; margin-right: 8px; }
    .pivot-spec { padding: 12px; background: rgba(229, 184, 76, 0.08); border-radius: 8px; border-left: 3px solid #E5B84C; }
    .pivot-label { font-size: 12px; font-weight: 700; color: #E5B84C; margin-bottom: 8px; }
    .stack-tags { display: flex; gap: 8px; flex-wrap: wrap; }
    .stack-tag {
      padding: 6px 12px;
      background: rgba(75, 147, 255, 0.15);
      border-radius: 100px;
      font-size: 12px;
      color: #4B93FF;
      font-weight: 600;
    }
    .action-bar { display: flex; gap: 12px; margin-top: 20px; flex-wrap: wrap; }

    /* ===== BUTTONS ===== */
    .btn-primary {
      padding: 12px 24px;
      background: var(--accent);
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }
    .btn-primary:hover {
      background: #3a82ff;
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(75, 147, 255, 0.3);
    }
    .btn-secondary {
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid var(--border-subtle);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .btn-secondary:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-hover);
    }

    /* ===== FORMS ===== */
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; font-size: 13px; font-weight: 600; color: #f0f4f8; margin-bottom: 8px; }
    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border-subtle);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 14px;
      font-family: inherit;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.08);
      border-color: var(--border-hover);
      box-shadow: 0 0 0 3px rgba(75, 147, 255, 0.1);
    }
    .form-textarea { resize: vertical; min-height: 100px; }
    .checkbox-group { display: flex; align-items: center; gap: 8px; cursor: pointer; }
    .checkbox-input { width: 18px; height: 18px; cursor: pointer; }

    /* ===== MODALS ===== */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at center, rgba(75, 147, 255, 0.1) 0%, rgba(0, 0, 0, 0.6) 100%);
      backdrop-filter: blur(8px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-overlay.active { display: flex; }
    .modal {
      background: rgba(13, 17, 23, 0.98);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      max-width: 90vw;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
      animation: modalIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes modalIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    .modal-header {
      padding: 28px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .modal-title { font-size: 20px; font-weight: 700; color: #f0f4f8; }
    .modal-close {
      width: 32px;
      height: 32px;
      border: none;
      background: rgba(255, 255, 255, 0.06);
      color: #94a3b8;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-close:hover { background: rgba(255, 255, 255, 0.1); color: #f0f4f8; }
    .modal-body { padding: 28px; }
    .modal-footer {
      padding: 20px 28px;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      gap: 12px;
      justify-content: flex-end;
    }

    /* ===== TABS ===== */
    .tabs { display: flex; gap: 4px; border-bottom: 1px solid rgba(255, 255, 255, 0.05); margin-bottom: 24px; }
    .tab {
      padding: 12px 16px;
      background: transparent;
      border: none;
      border-bottom: 2px solid transparent;
      color: #94a3b8;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s ease;
    }
    .tab.active {
      color: #4B93FF;
      border-bottom-color: #4B93FF;
    }
    .tab:hover { color: #f0f4f8; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* ===== BADGES ===== */
    .badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 100px;
      font-size: 12px;
      font-weight: 600;
    }
    .badge-primary { background: rgba(75, 147, 255, 0.15); color: #4B93FF; }
    .badge-success { background: rgba(92, 214, 200, 0.15); color: #5CD6C8; }
    .badge-warning { background: rgba(229, 184, 76, 0.15); color: #E5B84C; }
    .verified-badge {
      padding: 8px 16px;
      background: rgba(92, 214, 200, 0.15);
      color: #5CD6C8;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 700;
    }

    /* ===== CHAT PANEL ===== */
    .ai-chat-panel {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      max-height: 400px;
      margin-top: 20px;
    }
    .chat-header {
      padding: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      font-size: 13px;
      font-weight: 700;
      color: #f0f4f8;
    }
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .chat-message {
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 13px;
      line-height: 1.5;
    }
    .chat-message.user {
      background: rgba(75, 147, 255, 0.15);
      color: #f0f4f8;
      text-align: right;
      margin-left: 40px;
    }
    .chat-message.ai {
      background: rgba(255, 255, 255, 0.05);
      color: #94a3b8;
      margin-right: 40px;
    }
    .chat-message.thinking {
      color: #64748B;
      font-style: italic;
      text-align: center;
    }
    .chat-input-group {
      padding: 16px;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      gap: 8px;
    }
    .chat-input {
      flex: 1;
      padding: 10px 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 8px;
      color: #f0f4f8;
      font-size: 13px;
      font-family: inherit;
      transition: all 0.2s ease;
    }
    .chat-input:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(75, 147, 255, 0.3);
    }
    .chat-btn {
      padding: 10px 16px;
      background: #4B93FF;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .chat-btn:hover { background: #3a82ff; }

    /* ===== LIVE SESSION ===== */
    .candidate-header {
      padding: 20px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      display: flex;
      gap: 16px;
      align-items: center;
      margin-bottom: 24px;
    }
    .candidate-avatar {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      background: rgba(75, 147, 255, 0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #4B93FF;
      flex-shrink: 0;
    }
    .anti-cheat-panel {
      padding: 20px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      margin-bottom: 24px;
    }
    .anti-cheat-title { font-size: 13px; font-weight: 700; color: #f0f4f8; margin-bottom: 16px; }
    .anti-cheat-items { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; }
    .anti-cheat-item {
      padding: 12px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid var(--border-subtle);
      border-radius: 8px;
      display: flex;
      gap: 8px;
      align-items: center;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .anti-cheat-item.verified { border-color: rgba(92, 214, 200, 0.2); }
    .anti-cheat-item.pending { border-color: rgba(229, 184, 76, 0.2); }
    .anti-cheat-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--text-muted);
      transition: all 0.25s ease;
    }
    .anti-cheat-item.verified .anti-cheat-dot {
      background: var(--success);
      animation: pulse 2s ease-in-out infinite;
    }
    .anti-cheat-item.pending .anti-cheat-dot { background: var(--warning); }
    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(92, 214, 200, 0.7); }
      50% { box-shadow: 0 0 0 4px rgba(92, 214, 200, 0); }
    }
    .anti-cheat-text { font-size: 13px; color: #f0f4f8; }
    .pivot-timeline {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 16px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      margin-bottom: 24px;
      position: relative;
      height: 40px;
    }
    .pivot-line {
      flex: 1;
      height: 2px;
      background: rgba(255, 255, 255, 0.1);
      position: relative;
    }
    .pivot-marker {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #E5B84C;
      border: 2px solid rgba(229, 184, 76, 0.3);
      z-index: 2;
    }
    .pivot-marker::after {
      content: '60m Pivot';
      position: absolute;
      top: -22px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 10px;
      font-weight: 700;
      color: #E5B84C;
      white-space: nowrap;
    }
    .progress-dot {
      position: absolute;
      left: 0%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #4B93FF;
      z-index: 3;
      transition: left 0.1s linear;
    }
    .timeline-fill {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      background: linear-gradient(90deg, var(--accent), rgba(75, 147, 255, 0.4));
      border-radius: 2px;
      z-index: 1;
      transition: width 0.1s linear;
      box-shadow: 0 0 12px rgba(75, 147, 255, 0.4), inset 0 1px 2px rgba(255,255,255,0.1);
    }
    .pivot-timeline-labels {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: #64748B;
      margin-top: 4px;
    }

    /* ===== SESSION STATS ===== */
    .session-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 16px; margin-bottom: 24px; }
    .stat-box {
      padding: 16px;
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .stat-box:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-hover);
      transform: translateY(-2px);
    }
    .stat-box-label { font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; font-weight: 600; }
    .stat-box-value { font-size: 24px; font-weight: 700; color: var(--accent); }
    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 3px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4B93FF, #5CD6C8);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    /* ===== COMMIT FEED ===== */
    .commit-feed { display: flex; flex-direction: column; gap: 12px; }
    .commit-item {
      padding: 16px;
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      display: flex;
      gap: 12px;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .commit-item:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-hover);
      transform: translateX(4px);
    }
    .commit-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: rgba(75, 147, 255, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      color: #4B93FF;
      font-size: 14px;
    }
    .commit-item.pivot .commit-icon { background: rgba(229, 184, 76, 0.15); color: #E5B84C; }
    .commit-content { flex: 1; }
    .commit-message { font-size: 14px; color: #f0f4f8; margin-bottom: 4px; }
    .commit-meta { font-size: 12px; color: #64748B; }

    /* ===== CANDIDATES TABLE ===== */
    .filter-bar {
      display: flex;
      gap: 16px;
      margin-bottom: 24px;
      flex-wrap: wrap;
      align-items: flex-end;
    }
    .filter-item { display: flex; flex-direction: column; gap: 6px; }
    .filter-label { font-size: 12px; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px; }
    .batch-actions {
      padding: 16px;
      background: rgba(75, 147, 255, 0.1);
      border: 1px solid rgba(75, 147, 255, 0.2);
      border-radius: 8px;
      margin-bottom: 16px;
      display: flex;
      gap: 12px;
    }
    .batch-actions.hidden { display: none; }
    .candidates-table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(255, 255, 255, 0.01);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      overflow: hidden;
    }
    .candidates-table thead {
      background: rgba(255, 255, 255, 0.02);
      border-bottom: 1px solid var(--border-subtle);
      position: sticky;
      top: 0;
      backdrop-filter: blur(10px);
      z-index: 10;
    }
    .candidates-table th {
      padding: 16px;
      text-align: left;
      font-size: 12px;
      font-weight: 700;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .candidates-table td {
      padding: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.02);
      font-size: 14px;
      color: var(--text-primary);
    }
    .candidates-table tbody tr {
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      border-left: 3px solid transparent;
    }
    .candidates-table tbody tr:hover {
      background: rgba(255, 255, 255, 0.03);
      border-left-color: var(--accent);
    }

    /* ===== SCORING ===== */
    .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; }
    @media (max-width: 1400px) { .two-column { grid-template-columns: 1fr; } }
    .rubric-dimension { margin-bottom: 32px; }
    .dimension-label { display: block; font-size: 13px; font-weight: 600; color: #f0f4f8; margin-bottom: 12px; }
    .slider { width: 100%; height: 8px; border-radius: 4px; outline: none; cursor: pointer; -webkit-appearance: none; appearance: none; background: linear-gradient(to right, #4B93FF 50%, rgba(255,255,255,0.12) 50%); }
    .slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; border-radius: 50%; background: #4B93FF; border: 3px solid #1a2a44; cursor: pointer; box-shadow: 0 0 8px rgba(75,147,255,0.4); }
    .slider::-moz-range-thumb { width: 20px; height: 20px; border-radius: 50%; background: #4B93FF; border: 3px solid #1a2a44; cursor: pointer; }
    .slider::-moz-range-progress { background: #4B93FF; border-radius: 4px; height: 8px; }
    .slider-value { display: inline-block; min-width: 32px; text-align: center; font-size: 14px; font-weight: 700; color: #4B93FF; background: rgba(75,147,255,0.1); border-radius: 6px; padding: 2px 8px; margin-left: 8px; }
    .dimension-scale {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #64748B;
      margin-top: 8px;
    }

    /* ===== TOAST ===== */
    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      padding: 16px 20px;
      background: var(--bg-primary);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 14px;
      z-index: 2000;
      animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      display: flex;
      gap: 12px;
      align-items: center;
      border-left: 4px solid var(--border-subtle);
    }
    @keyframes slideUp {
      from { transform: translateY(100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .toast.success { border-left-color: var(--success); }
    .toast.error { border-left-color: #ff6464; }
    .toast-close { background: transparent; border: none; color: var(--text-secondary); cursor: pointer; padding: 0; transition: all 0.2s ease; }
    .toast-close:hover { color: var(--text-primary); }

    /* ===== AVATAR BADGES ===== */
    .avatar-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .avatar-circle {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--accent-glow);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: var(--accent);
      font-size: 12px;
    }

    /* ===== STATUS BADGE ===== */
    .status-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 100px;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .status-badge.ready {
      background: linear-gradient(135deg, rgba(92,214,200,0.2), rgba(92,214,200,0.1));
      color: var(--success);
      border: 1px solid rgba(92,214,200,0.3);
    }
    .status-badge.progress {
      background: linear-gradient(135deg, rgba(75,147,255,0.2), rgba(75,147,255,0.1));
      color: var(--accent);
      border: 1px solid rgba(75,147,255,0.3);
    }
    .status-badge.scored {
      background: linear-gradient(135deg, rgba(92,214,200,0.2), rgba(75,147,255,0.1));
      color: var(--success);
      border: 1px solid rgba(92,214,200,0.3);
    }
    .status-badge.invited {
      background: linear-gradient(135deg, rgba(229,184,76,0.2), rgba(229,184,76,0.1));
      color: var(--warning);
      border: 1px solid rgba(229,184,76,0.3);
    }

    /* ===== SCORE RADIAL ===== */
    .score-radial {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: conic-gradient(var(--accent) 0%, var(--accent) var(--score-percentage, 0%), rgba(255,255,255,0.08) var(--score-percentage, 0%), rgba(255,255,255,0.08) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 700;
      color: var(--text-primary);
      position: relative;
      transition: all 0.25s ease;
    }
    .score-radial::before {
      content: '';
      position: absolute;
      inset: 5px;
      border-radius: 50%;
      background: var(--bg-primary, #0a1628);
    }
    .score-radial span {
      position: relative;
      z-index: 1;
    }

    /* ===== CODE EDITOR ===== */
    .code-editor {
      background: #0a0f1a;
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      padding: 16px;
      font-family: 'Fira Code', monospace;
      font-size: 12px;
      color: #89ddff;
      overflow-x: auto;
      margin-top: 16px;
    }
    .code-editor-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border-subtle);
    }
    .code-editor-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-secondary);
    }
    .code-editor-body .kw { color: #c792ea; }
    .code-editor-body .tp { color: #ffcb8b; }
    .code-editor-body .fn { color: #82aaff; }
    .code-editor-body .pr { color: #89ddff; }
    .code-editor-body .st { color: #c3e88d; }
    .code-editor-body .nm { color: #f78c6c; }
    .code-editor-body .cm { color: #546e7a; font-style: italic; }

    /* ===== PIPELINE VISUALIZATION ===== */
    .pipeline-container {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 24px;
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      margin-bottom: 32px;
      overflow-x: auto;
    }
    .pipeline-stage {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      flex-shrink: 0;
    }
    .pipeline-segment {
      height: 40px;
      display: flex;
      align-items: center;
      border-radius: 6px;
      padding: 8px 12px;
      font-size: 12px;
      font-weight: 600;
      color: white;
      transition: all 0.25s ease;
    }
    .pipeline-arrow {
      color: var(--text-muted);
      font-size: 20px;
      flex-shrink: 0;
    }

    /* ===== RADAR CHART ===== */
    .radar-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 32px;
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      padding: 32px;
    }
    .radar-canvas {
      max-width: 300px;
      height: auto;
    }

    /* ===== SCROLLBAR ===== */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
    }
    ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.15); }
  </style>
</head>
<body>
  <div id="app">
    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-top">
        <div class="logo">
          <svg class="logo-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2L3 7v5c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-9-5z" fill="#4B93FF"/>
          </svg>
          <span style="display: flex; align-items: center;">MendelHire</span>
        </div>
      </div>
      <nav class="nav">
        <div class="nav-item active" data-page="dashboard">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
          </svg>
          <span class="nav-text">Dashboard</span>
        </div>
        <div class="nav-item" data-page="challenges">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="12 3 20 7.5 20 16.5 12 21 4 16.5 4 7.5 12 3"></polyline>
            <line x1="12" y1="12" x2="20" y2="7.5"></line>
            <line x1="12" y1="12" x2="12" y2="21"></line>
            <line x1="12" y1="12" x2="4" y2="7.5"></line>
          </svg>
          <span class="nav-text">Challenges</span>
        </div>
        <div class="nav-item" data-page="live-session">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="1"></circle>
            <path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            <path d="M12 7v5l3 2"></path>
          </svg>
          <span class="nav-text">Live Session</span>
        </div>
        <div class="nav-item" data-page="candidates">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
          <span class="nav-text">Candidates</span>
        </div>
        <div class="nav-item" data-page="scoring">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="2" x2="12" y2="22"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
          <span class="nav-text">Scoring</span>
        </div>
        <div class="nav-item" data-page="settings">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6M4.22 4.22l4.24 4.24m3.08 3.08l4.24 4.24M1 12h6m6 0h6m-4.22-7.78l4.24-4.24m-3.08 11.32l4.24 4.24M4.22 19.78l4.24-4.24m3.08-3.08l4.24-4.24"></path>
          </svg>
          <span class="nav-text">Settings</span>
        </div>
      </nav>
      <div class="sidebar-bottom">
        <div class="user-card">
          <div class="user-card-avatar">CA</div>
          <div class="user-card-name">Charbel A.</div>
          <div class="user-card-org">MendelHire</div>
        </div>
        <button class="toggle-sidebar" id="toggleSidebar">Collapse</button>
      </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main">
      <div class="topbar">
        <h1 class="topbar-title" id="topbarTitle">Dashboard</h1>
        <div class="topbar-actions">
          <input type="text" class="topbar-search" placeholder="Search...">
          <button class="icon-btn" onclick="showToast('Refreshing data...')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
          <button class="icon-btn" style="position: relative;" onclick="showToast('No new notifications')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <span style="position: absolute; top: 4px; right: 4px; width: 8px; height: 8px; background: #4B93FF; border-radius: 50; border: 2px solid #0a1628;"></span>
          </button>
        </div>
      </div>

      <div class="content">
        <!-- DASHBOARD PAGE -->
        <div id="dashboard" class="page active">
          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-label">Total Hires</div>
              <div class="metric-value">12</div>
              <div class="metric-change">+4 this month</div>
              <svg class="metric-sparkline" viewBox="0 0 100 30" preserveAspectRatio="none">
                <path d="M0,25 L10,20 L20,18 L30,15 L40,12 L50,10 L60,12 L70,8 L80,5 L90,3 L100,2" fill="none" stroke="rgba(75,147,255,0.3)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="metric-card">
              <div class="metric-label">In Progress</div>
              <div class="metric-value">8</div>
              <div class="metric-change">-1 since yesterday</div>
              <svg class="metric-sparkline" viewBox="0 0 100 30" preserveAspectRatio="none">
                <path d="M0,10 L10,10 L20,11 L30,10 L40,11 L50,15 L60,14 L70,13 L80,12 L90,11 L100,10" fill="none" stroke="rgba(75,147,255,0.3)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="metric-card">
              <div class="metric-label">Avg Score</div>
              <div class="metric-value">4.1</div>
              <div class="metric-change">+0.3 vs last batch</div>
              <svg class="metric-sparkline" viewBox="0 0 100 30" preserveAspectRatio="none">
                <path d="M0,22 L10,20 L20,18 L30,16 L40,14 L50,12 L60,10 L70,8 L80,6 L90,4 L100,2" fill="none" stroke="rgba(75,147,255,0.3)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="metric-card">
              <div class="metric-label">Ready to Hire</div>
              <div class="metric-value">4</div>
              <div class="metric-change">2 need review</div>
              <svg class="metric-sparkline" viewBox="0 0 100 30" preserveAspectRatio="none">
                <path d="M0,25 L10,24 L20,22 L30,20 L40,18 L50,15 L60,12 L70,8 L80,5 L90,3 L100,2" fill="none" stroke="rgba(75,147,255,0.3)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>

          <div class="pipeline-container">
            <div class="pipeline-stage">
              <div class="pipeline-segment" style="background: linear-gradient(135deg, rgba(75,147,255,0.8), rgba(75,147,255,0.6)); width: 140px;">Applied (24)</div>
            </div>
            <div class="pipeline-arrow">→</div>
            <div class="pipeline-stage">
              <div class="pipeline-segment" style="background: linear-gradient(135deg, rgba(92,214,200,0.8), rgba(92,214,200,0.6)); width: 110px;">Challenged (16)</div>
            </div>
            <div class="pipeline-arrow">→</div>
            <div class="pipeline-stage">
              <div class="pipeline-segment" style="background: linear-gradient(135deg, rgba(229,184,76,0.8), rgba(229,184,76,0.6)); width: 90px;">Scored (12)</div>
            </div>
            <div class="pipeline-arrow">→</div>
            <div class="pipeline-stage">
              <div class="pipeline-segment" style="background: linear-gradient(135deg, rgba(75,147,255,0.8), rgba(75,147,255,0.6)); width: 120px;">FitFolio Ready (4)</div>
            </div>
            <div class="pipeline-arrow">→</div>
            <div class="pipeline-stage">
              <div class="pipeline-segment" style="background: linear-gradient(135deg, rgba(92,214,200,0.8), rgba(92,214,200,0.6)); width: 80px;">Hired (2)</div>
            </div>
          </div>

          <div class="activity-feed">
            <div class="activity-title">Recent Activity</div>
            <div class="activity-item">
              <div class="activity-icon success">SC</div>
              <div class="activity-content">
                <div class="activity-text">Sarah Chen completed Frontend React challenge</div>
                <div class="activity-time">2 hours ago</div>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-icon warning">MJ</div>
              <div class="activity-content">
                <div class="activity-text">Marcus Johnson needs attention on scoring review</div>
                <div class="activity-time">4 hours ago</div>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-icon success">SY</div>
              <div class="activity-content">
                <div class="activity-text">New challenge "Data Python/SQL" is ready to use</div>
                <div class="activity-time">1 day ago</div>
              </div>
            </div>
            <div style="text-align: center; padding: 12px 0; color: var(--accent); font-size: 13px; font-weight: 600; cursor: pointer;">View all activity</div>
          </div>
        </div>

        <!-- CHALLENGES PAGE -->
        <div id="challenges" class="page">
          <div class="challenges-header">
            <h2 style="font-size: 20px; font-weight: 700;">Active Challenges</h2>
            <button class="btn-primary" onclick="openCreateChallengeModal()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              Create Challenge
            </button>
          </div>
          <div class="challenge-grid">
            <div class="challenge-card">
              <div class="challenge-type">Frontend</div>
              <div class="challenge-title">Frontend React</div>
              <div class="challenge-desc">Build a React component library with real-world requirements</div>
              <div class="challenge-stats">
                <div class="challenge-stat">
                  <div class="challenge-stat-label">Candidates</div>
                  <div class="challenge-stat-value">12</div>
                </div>
                <div class="challenge-stat">
                  <div class="challenge-stat-label">Avg Score</div>
                  <div class="challenge-stat-value">4.2</div>
                </div>
                <div class="challenge-stat">
                  <div class="challenge-stat-label">Duration</div>
                  <div class="challenge-stat-value">120 min</div>
                </div>
              </div>
              <div class="challenge-section">
                <div class="challenge-section-title">Stack</div>
                <div class="stack-tags">
                  <div class="stack-tag">React</div>
                  <div class="stack-tag">TypeScript</div>
                  <div class="stack-tag">Testing</div>
                </div>
              </div>
              <div class="challenge-section">
                <div class="challenge-section-title">Key Skills</div>
                <ul>
                  <li>Component architecture</li>
                  <li>State management</li>
                  <li>Performance optimization</li>
                </ul>
              </div>
              <div class="pivot-spec">
                <div class="pivot-label">Pivot Point</div>
                <div style="font-size: 14px; color: #f0f4f8;">60 minutes - Clean architecture checkpoint</div>
              </div>
            </div>
            <div class="challenge-card">
              <div class="challenge-type">Data</div>
              <div class="challenge-title">Data Python/SQL</div>
              <div class="challenge-desc">Analyze and optimize database queries with real datasets</div>
              <div class="challenge-stats">
                <div class="challenge-stat">
                  <div class="challenge-stat-label">Candidates</div>
                  <div class="challenge-stat-value">8</div>
                </div>
                <div class="challenge-stat">
                  <div class="challenge-stat-label">Avg Score</div>
                  <div class="challenge-stat-value">4.0</div>
                </div>
                <div class="challenge-stat">
                  <div class="challenge-stat-label">Duration</div>
                  <div class="challenge-stat-value">120 min</div>
                </div>
              </div>
              <div class="challenge-section">
                <div class="challenge-section-title">Stack</div>
                <div class="stack-tags">
                  <div class="stack-tag">Python</div>
                  <div class="stack-tag">SQL</div>
                  <div class="stack-tag">PostgreSQL</div>
                </div>
              </div>
              <div class="challenge-section">
                <div class="challenge-section-title">Key Skills</div>
                <ul>
                  <li>Query optimization</li>
                  <li>Data analysis</li>
                  <li>ETL pipelines</li>
                </ul>
              </div>
              <div class="pivot-spec">
                <div class="pivot-label">Pivot Point</div>
                <div style="font-size: 14px; color: #f0f4f8;">60 minutes - Schema design checkpoint</div>
              </div>
            </div>
          </div>
        </div>

        <!-- LIVE SESSION PAGE -->
        <div id="live-session" class="page">
          <div class="candidate-header">
            <div class="candidate-avatar">JL</div>
            <div style="flex: 1;">
              <div style="font-size: 16px; font-weight: 700; color: #f0f4f8; margin-bottom: 4px;">Jordan Lee</div>
              <div style="font-size: 13px; color: #94a3b8;">Frontend React • Challenge in progress</div>
            </div>
            <div style="text-align: right;">
              <div class="badge badge-warning">In Progress</div>
            </div>
          </div>

          <div class="anti-cheat-panel">
            <div class="anti-cheat-title">Session Verification</div>
            <div class="anti-cheat-items">
              <div class="anti-cheat-item verified">
                <div class="anti-cheat-dot"></div>
                <div class="anti-cheat-text">Environment Verified</div>
              </div>
              <div class="anti-cheat-item verified">
                <div class="anti-cheat-dot"></div>
                <div class="anti-cheat-text">Tab Isolation Active</div>
              </div>
              <div class="anti-cheat-item pending">
                <div class="anti-cheat-dot"></div>
                <div class="anti-cheat-text">External Tools Blocked</div>
              </div>
              <div class="anti-cheat-item verified">
                <div class="anti-cheat-dot"></div>
                <div class="anti-cheat-text">IDE Integration Clear</div>
              </div>
            </div>
          </div>

          <div class="pivot-timeline" style="margin-top: 8px;">
            <span style="font-size: 12px; color: #64748B; white-space: nowrap; margin-right: 8px;">0m</span>
            <div class="pivot-line">
              <div class="timeline-fill" id="progressFill"></div>
              <div class="pivot-marker"></div>
              <div class="progress-dot" id="progressDot"></div>
            </div>
            <span style="font-size: 12px; color: #64748B; white-space: nowrap; margin-left: 8px;">120m</span>
          </div>
          <div class="pivot-timeline-labels">
            <span style="font-size: 11px; color: #64748B;">Total: 120 minutes</span>
          </div>

          <div class="session-stats">
            <div class="stat-box">
              <div class="stat-box-label">Elapsed</div>
              <div class="stat-box-value" id="elapsedTime">0:00</div>
            </div>
            <div class="stat-box">
              <div class="stat-box-label">Commits</div>
              <div class="stat-box-value" id="commitCount">0</div>
            </div>
            <div class="stat-box">
              <div class="stat-box-label">Lines Added</div>
              <div class="stat-box-value" id="linesAdded">0</div>
            </div>
            <div class="stat-box">
              <div class="stat-box-label">Phase</div>
              <div class="stat-box-value" id="sessionPhase" style="color: #5CD6C8;">Pre-Pivot</div>
            </div>
          </div>

          <div style="font-size: 14px; font-weight: 700; color: #f0f4f8; margin-bottom: 16px;">Commit Feed</div>
          <div class="commit-feed" id="commitFeed">
            <div class="commit-item">
              <div class="commit-icon">1</div>
              <div class="commit-content">
                <div class="commit-message">Initial project setup</div>
                <div class="commit-meta">By Jordan Lee at 0:05</div>
              </div>
            </div>
            <div class="commit-item">
              <div class="commit-icon">2</div>
              <div class="commit-content">
                <div class="commit-message">Add component structure and types</div>
                <div class="commit-meta">By Jordan Lee at 15:23</div>
              </div>
            </div>
          </div>

          <div class="action-bar" style="margin-top: 32px;">
            <button class="btn-primary" id="simBtn" onclick="toggleSimulation()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
              Start Simulation
            </button>
            <button class="btn-secondary" onclick="resetSimulation()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                <polyline points="1 4 1 10 7 10"></polyline>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
              </svg>
              Reset
            </button>
            <button class="btn-secondary" onclick="showToast('Toggled candidate view')">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              View Candidate
            </button>
            <button class="btn-secondary" onclick="showToast('Opened message panel')">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg>
              Message
            </button>
          </div>

          <div class="code-editor">
            <div class="code-editor-header">
              <div class="code-editor-title">src/components/ProductCard.tsx</div>
              <span style="font-size: 11px; color: var(--text-muted);">Latest commit</span>
            </div>
            <div class="code-editor-body" style="font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.8; color: #89ddff; transition: opacity 0.3s ease;">
              <span class="kw">export</span> <span class="kw">interface</span> <span class="tp">Product</span> {<br>
              &nbsp;&nbsp;<span class="pr">id</span>: <span class="kw">string</span>;<br>
              &nbsp;&nbsp;<span class="pr">name</span>: <span class="kw">string</span>;<br>
              &nbsp;&nbsp;<span class="pr">price</span>: <span class="kw">number</span>;<br>
              }
            </div>
          </div>
        </div>

        <!-- CANDIDATES PAGE -->
        <div id="candidates" class="page">
          <div class="filter-bar">
            <div class="filter-item">
              <label class="filter-label">Status</label>
              <select id="filterStatus" class="form-select" style="width: 180px;" onchange="filterCandidates()">
                <option value="All">All</option>
                <option value="FitFolio Ready">FitFolio Ready</option>
                <option value="In Progress">In Progress</option>
                <option value="Scored">Scored</option>
                <option value="Invited">Invited</option>
              </select>
            </div>
            <div class="filter-item">
              <label class="filter-label">Challenge</label>
              <select id="filterChallenge" class="form-select" style="width: 180px;" onchange="filterCandidates()">
                <option value="All">All</option>
                <option value="Frontend React">Frontend React</option>
                <option value="Data Python/SQL">Data Python/SQL</option>
              </select>
            </div>
            <div class="filter-item">
              <label class="filter-label">Score</label>
              <select id="filterScore" class="form-select" style="width: 140px;" onchange="filterCandidates()">
                <option value="All">All</option>
                <option value="4.0">4.0+</option>
                <option value="3.5">3.5+</option>
                <option value="3.0">3.0+</option>
              </select>
            </div>
            <div style="margin-left: auto; display: flex; gap: 8px; align-items: flex-end;">
              <button class="btn-secondary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                  <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                </svg>
                Filters
              </button>
              <button class="btn-secondary" onclick="toggleAnonymization()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <span id="anonToggleText">Anonymize</span>
              </button>
            </div>
          </div>

          <table class="candidates-table">
            <thead>
              <tr>
                <th><input type="checkbox" style="width: 18px; height: 18px;"></th>
                <th>Name</th>
                <th>ID</th>
                <th>Challenge</th>
                <th>Status</th>
                <th>Score</th>
                <th>Verified</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="candidatesTableBody">
              <tr data-status="FitFolio Ready" data-challenge="Frontend React" data-score="4.2">
                <td><input type="checkbox" style="width: 18px; height: 18px;"></td>
                <td id="name-MH-2841"><div class="avatar-badge"><div class="avatar-circle">SC</div><strong>Sarah Chen</strong></div></td>
                <td>MH-2841</td>
                <td>Frontend React</td>
                <td><span class="status-badge ready">FitFolio Ready</span></td>
                <td><div class="score-radial" style="--score-percentage: 84%;"><span>4.2</span></div></td>
                <td><span class="verified-badge">Verified</span></td>
                <td><button class="btn-secondary" onclick="openFitFolioModal('MH-2841')" style="font-size: 12px; padding: 8px 12px;">View</button></td>
              </tr>
              <tr data-status="Scored" data-challenge="Frontend React" data-score="3.8">
                <td><input type="checkbox" style="width: 18px; height: 18px;"></td>
                <td id="name-MH-2842"><div class="avatar-badge"><div class="avatar-circle">MJ</div><strong>Marcus Johnson</strong></div></td>
                <td>MH-2842</td>
                <td>Frontend React</td>
                <td><span class="status-badge scored">Scored</span></td>
                <td><div class="score-radial" style="--score-percentage: 76%;"><span>3.8</span></div></td>
                <td><span class="verified-badge">Verified</span></td>
                <td><button class="btn-secondary" onclick="openFitFolioModal('MH-2842')" style="font-size: 12px; padding: 8px 12px;">View</button></td>
              </tr>
              <tr data-status="In Progress" data-challenge="Frontend React" data-score="0">
                <td><input type="checkbox" style="width: 18px; height: 18px;"></td>
                <td id="name-MH-2843"><div class="avatar-badge"><div class="avatar-circle">PP</div><strong>Priya Patel</strong></div></td>
                <td>MH-2843</td>
                <td>Frontend React</td>
                <td><span class="status-badge progress">In Progress</span></td>
                <td><span style="color: #94a3b8;">-</span></td>
                <td><span style="font-size: 12px; color: #64748B;">-</span></td>
                <td><button class="btn-secondary" style="font-size: 12px; padding: 8px 12px;" disabled>View</button></td>
              </tr>
              <tr data-status="FitFolio Ready" data-challenge="Data Python/SQL" data-score="4.5">
                <td><input type="checkbox" style="width: 18px; height: 18px;"></td>
                <td id="name-MH-2844"><div class="avatar-badge"><div class="avatar-circle">AR</div><strong>Alex Rivera</strong></div></td>
                <td>MH-2844</td>
                <td>Data Python/SQL</td>
                <td><span class="status-badge ready">FitFolio Ready</span></td>
                <td><div class="score-radial" style="--score-percentage: 90%;"><span>4.5</span></div></td>
                <td><span class="verified-badge">Verified</span></td>
                <td><button class="btn-secondary" onclick="openFitFolioModal('MH-2844')" style="font-size: 12px; padding: 8px 12px;">View</button></td>
              </tr>
              <tr data-status="In Progress" data-challenge="Frontend React" data-score="0">
                <td><input type="checkbox" style="width: 18px; height: 18px;"></td>
                <td id="name-MH-2845"><div class="avatar-badge"><div class="avatar-circle">JL</div><strong>Jordan Lee</strong></div></td>
                <td>MH-2845</td>
                <td>Frontend React</td>
                <td><span class="status-badge progress">In Progress (Live)</span></td>
                <td><span style="color: #94a3b8;">-</span></td>
                <td><span style="font-size: 12px; color: #64748B;">-</span></td>
                <td><button class="btn-secondary" style="font-size: 12px; padding: 8px 12px;" disabled>View</button></td>
              </tr>
              <tr data-status="Scored" data-challenge="Data Python/SQL" data-score="3.5">
                <td><input type="checkbox" style="width: 18px; height: 18px;"></td>
                <td id="name-MH-2846"><div class="avatar-badge"><div class="avatar-circle">TW</div><strong>Tanya Williams</strong></div></td>
                <td>MH-2846</td>
                <td>Data Python/SQL</td>
                <td><span class="status-badge scored">Scored</span></td>
                <td><div class="score-radial" style="--score-percentage: 70%;"><span>3.5</span></div></td>
                <td><span class="verified-badge">Verified</span></td>
                <td><button class="btn-secondary" onclick="openFitFolioModal('MH-2846')" style="font-size: 12px; padding: 8px 12px;">View</button></td>
              </tr>
              <tr data-status="Invited" data-challenge="Frontend React" data-score="0">
                <td><input type="checkbox" style="width: 18px; height: 18px;"></td>
                <td id="name-MH-2847"><div class="avatar-badge"><div class="avatar-circle">RK</div><strong>Raj Krishnamurthy</strong></div></td>
                <td>MH-2847</td>
                <td>Frontend React</td>
                <td><span class="status-badge invited">Invited</span></td>
                <td><span style="color: #94a3b8;">-</span></td>
                <td><span style="font-size: 12px; color: #64748B;">-</span></td>
                <td><button class="btn-secondary" style="font-size: 12px; padding: 8px 12px;" disabled>View</button></td>
              </tr>
              <tr data-status="FitFolio Ready" data-challenge="Data Python/SQL" data-score="4.0">
                <td><input type="checkbox" style="width: 18px; height: 18px;"></td>
                <td id="name-MH-2848"><div class="avatar-badge"><div class="avatar-circle">EV</div><strong>Elena Volkova</strong></div></td>
                <td>MH-2848</td>
                <td>Data Python/SQL</td>
                <td><span class="status-badge ready">FitFolio Ready</span></td>
                <td><div class="score-radial" style="--score-percentage: 80%;"><span>4.0</span></div></td>
                <td><span class="verified-badge">Verified</span></td>
                <td><button class="btn-secondary" onclick="openFitFolioModal('MH-2848')" style="font-size: 12px; padding: 8px 12px;">View</button></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- SCORING PAGE -->
        <div id="scoring" class="page">
          <!-- Candidate Selector -->
          <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 28px; padding: 20px; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px;">
            <div style="width: 44px; height: 44px; border-radius: 50%; background: rgba(75,147,255,0.15); color: #4B93FF; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px;">SC</div>
            <div style="flex: 1;">
              <div style="font-size: 16px; font-weight: 700; color: #f0f4f8;">Sarah Chen</div>
              <div style="font-size: 13px; color: #64748B;">Frontend React · MH-2841 · FitFolio Ready</div>
            </div>
            <select class="form-select" style="width: 220px;" onchange="showToast('Switched candidate')">
              <option>Sarah Chen — 4.2</option>
              <option>Marcus Johnson — 3.8</option>
              <option>Alex Rivera — 4.5</option>
              <option>Tanya Williams — 3.5</option>
              <option>Elena Volkova — 4.0</option>
            </select>
          </div>

          <div class="radar-container">
            <canvas id="radarChart" class="radar-canvas" width="300" height="300"></canvas>
          </div>

          <div class="two-column">
            <div>
              <h2 style="font-size: 18px; font-weight: 700; color: #f0f4f8; margin-bottom: 24px; letter-spacing: -0.02em;">Scoring Rubric</h2>

              <div class="rubric-dimension">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
                  <label class="dimension-label" style="margin-bottom:0;">Product Sense</label>
                  <span class="slider-value" id="val_ps">3</span>
                </div>
                <input type="range" class="slider" min="1" max="5" value="3" id="slider_ps" oninput="updateSlider(this,'val_ps')">
                <div class="dimension-scale">
                  <span>Weak (1)</span>
                  <span>Outstanding (5)</span>
                </div>
              </div>

              <div class="rubric-dimension">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
                  <label class="dimension-label" style="margin-bottom:0;">Communication</label>
                  <span class="slider-value" id="val_cm">3</span>
                </div>
                <input type="range" class="slider" min="1" max="5" value="3" id="slider_cm" oninput="updateSlider(this,'val_cm')">
                <div class="dimension-scale">
                  <span>Weak (1)</span>
                  <span>Outstanding (5)</span>
                </div>
              </div>

              <div class="rubric-dimension">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
                  <label class="dimension-label" style="margin-bottom:0;">Collaboration</label>
                  <span class="slider-value" id="val_cl">3</span>
                </div>
                <input type="range" class="slider" min="1" max="5" value="3" id="slider_cl" oninput="updateSlider(this,'val_cl')">
                <div class="dimension-scale">
                  <span>Weak (1)</span>
                  <span>Outstanding (5)</span>
                </div>
              </div>

              <div class="rubric-dimension">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
                  <label class="dimension-label" style="margin-bottom:0;">Diagnostics</label>
                  <span class="slider-value" id="val_dg">3</span>
                </div>
                <input type="range" class="slider" min="1" max="5" value="3" id="slider_dg" oninput="updateSlider(this,'val_dg')">
                <div class="dimension-scale">
                  <span>Weak (1)</span>
                  <span>Outstanding (5)</span>
                </div>
              </div>

              <div class="rubric-dimension">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
                  <label class="dimension-label" style="margin-bottom:0;">Customer Empathy</label>
                  <span class="slider-value" id="val_ce">3</span>
                </div>
                <input type="range" class="slider" min="1" max="5" value="3" id="slider_ce" oninput="updateSlider(this,'val_ce')">
                <div class="dimension-scale">
                  <span>Weak (1)</span>
                  <span>Outstanding (5)</span>
                </div>
              </div>

              <button class="btn-primary" onclick="showToast('Scoring saved')" style="width: 100%;">Save Scoring</button>
            </div>

            <div>
              <h2 style="font-size: 18px; font-weight: 700; color: #f0f4f8; margin-bottom: 24px;">AI Comparison</h2>
              <div style="padding: 24px; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 12px;">
                <div style="margin-bottom: 20px;">
                  <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px;">Your Scoring</div>
                  <div style="font-size: 24px; font-weight: 700; color: #4B93FF;">4.2</div>
                </div>
                <div style="margin-bottom: 20px;">
                  <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px;">AI Recommendation</div>
                  <div style="font-size: 24px; font-weight: 700; color: #5CD6C8;">4.1</div>
                </div>
                <div style="margin-bottom: 20px;">
                  <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px;">Confidence</div>
                  <div class="progress-bar" style="margin-bottom: 8px;">
                    <div class="progress-fill" style="width: 87%;"></div>
                  </div>
                  <div style="font-size: 12px; color: #64748B;">87% - High confidence match</div>
                </div>
                <div style="padding: 12px; background: rgba(92, 214, 200, 0.1); border-radius: 8px; font-size: 13px; color: #5CD6C8;">
                  AI analysis suggests strong product sense and communication skills
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- SETTINGS PAGE -->
        <div id="settings" class="page">
          <h2 style="font-size: 20px; font-weight: 700; margin-bottom: 32px;">Settings</h2>

          <div style="max-width: 600px;">
            <div style="padding: 24px; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 12px; margin-bottom: 24px;">
              <h3 style="font-size: 16px; font-weight: 700; color: #f0f4f8; margin-bottom: 16px;">Team</h3>

              <div class="form-group">
                <label class="form-label">Team Name</label>
                <input type="text" class="form-input" value="MendelHire Hiring">
              </div>

              <div class="form-group">
                <label class="form-label">Organization</label>
                <input type="text" class="form-input" value="MendelHire">
              </div>

              <div class="form-group">
                <label class="form-label">Team Members</label>
                <div style="font-size: 13px; color: #94a3b8; line-height: 1.6;">
                  • Charbel A. (Admin)<br>
                  • Sarah Chen (Reviewer)<br>
                  • Marcus Johnson (Reviewer)
                </div>
              </div>
            </div>

            <div style="padding: 24px; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 12px; margin-bottom: 24px;">
              <h3 style="font-size: 16px; font-weight: 700; color: #f0f4f8; margin-bottom: 16px;">Integrations</h3>

              <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                <div>
                  <div style="font-size: 14px; font-weight: 600; color: #f0f4f8;">GitHub</div>
                  <div style="font-size: 12px; color: #64748B;">Connected</div>
                </div>
                <button class="btn-secondary" style="font-size: 12px; padding: 8px 12px;">Configure</button>
              </div>

              <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 0;">
                <div>
                  <div style="font-size: 14px; font-weight: 600; color: #f0f4f8;">Slack</div>
                  <div style="font-size: 12px; color: #64748B;">Not connected</div>
                </div>
                <button class="btn-secondary" style="font-size: 12px; padding: 8px 12px;">Connect</button>
              </div>
            </div>

            <div style="padding: 24px; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 12px;">
              <h3 style="font-size: 16px; font-weight: 700; color: #f0f4f8; margin-bottom: 16px;">Compensation</h3>

              <div class="form-group">
                <label class="form-label">Candidate Stipend (per hour)</label>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <span style="font-size: 14px; color: #f0f4f8;">USD</span>
                  <input type="number" class="form-input" value="35" style="flex: 1;">
                  <span style="font-size: 12px; color: #64748B;">/hr</span>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">Maximum Challenge Duration</label>
                <input type="number" class="form-input" value="120">
                <div style="font-size: 12px; color: #64748B; margin-top: 4px;">minutes</div>
              </div>

              <button class="btn-primary" onclick="showToast('Settings saved')" style="width: 100%;">Save Changes</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODALS -->
  <div class="modal-overlay" id="createChallengeModal">
    <div class="modal" style="width: 600px;">
      <div class="modal-header">
        <h2 class="modal-title">Create Challenge</h2>
        <button class="modal-close" onclick="closeCreateChallengeModal()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div id="challengeStep1" class="challenge-step">
          <h3 style="font-size: 16px; font-weight: 700; color: #f0f4f8; margin-bottom: 20px;">Step 1: Configure Challenge</h3>

          <div class="form-group">
            <label class="form-label">Role</label>
            <select class="form-select">
              <option>Frontend Engineer</option>
              <option>Backend Engineer</option>
              <option>Data Engineer</option>
              <option>Full Stack Engineer</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Seniority</label>
            <select class="form-select">
              <option>Junior (0-2 years)</option>
              <option>Mid (2-5 years)</option>
              <option>Senior (5+ years)</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Focus Area</label>
            <select class="form-select">
              <option>System Design</option>
              <option>Data Structures</option>
              <option>Real-World Project</option>
              <option>Code Quality</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Duration (minutes)</label>
            <input type="number" class="form-input" value="120">
          </div>

          <div class="form-group">
            <label class="form-label">Stipend (USD)</label>
            <input type="number" class="form-input" value="35">
          </div>
        </div>

        <div id="challengeStep2" class="challenge-step" style="display: none;">
          <h3 style="font-size: 16px; font-weight: 700; color: #f0f4f8; margin-bottom: 20px;">Step 2: AI Generating</h3>
          <div style="text-align: center; padding: 40px;">
            <div style="font-size: 48px; margin-bottom: 20px;">⚙️</div>
            <div style="font-size: 16px; font-weight: 600; color: #4B93FF; margin-bottom: 12px;">Generating Challenge</div>
            <div style="font-size: 13px; color: #64748B;">Creating AI-powered assessment tailored to your specifications...</div>
          </div>
        </div>

        <div id="challengeStep3" class="challenge-step" style="display: none;">
          <h3 style="font-size: 16px; font-weight: 700; color: #f0f4f8; margin-bottom: 20px;">Step 3: Review & Finalize</h3>

          <div style="padding: 16px; background: rgba(75, 147, 255, 0.1); border-radius: 8px; margin-bottom: 24px;">
            <div style="font-size: 14px; color: #f0f4f8; margin-bottom: 12px;">
              <strong>Challenge Summary</strong>
            </div>
            <div style="font-size: 13px; color: #94a3b8; line-height: 1.8;">
              <div>Role: Frontend Engineer</div>
              <div>Seniority: Mid (2-5 years)</div>
              <div>Duration: 120 minutes</div>
              <div>Focus: Real-World Project</div>
            </div>
          </div>

          <div class="ai-chat-panel" style="margin-top: 0;">
            <div class="chat-header">AI Assistant - Challenge Customization</div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input-group">
              <input type="text" class="chat-input" id="chatInput" placeholder="Ask anything about this challenge..." onkeydown="if(event.key==='Enter')sendChatMessage()">
              <button class="chat-btn" onclick="sendChatMessage()">Send</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeCreateChallengeModal()">Cancel</button>
        <button class="btn-primary" id="challengeNextBtn" onclick="nextChallengeStep()">Next</button>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="fitFolioModal">
    <div class="modal" style="width: 800px;">
      <div class="modal-header">
        <h2 class="modal-title">FitFolio Profile</h2>
        <button class="modal-close" onclick="closeFitFolioModal()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="tabs" id="fitFolioTabs">
          <button class="tab active" data-tab="hmCard">HM Card</button>
          <button class="tab" data-tab="atsFactsheet">ATS Factsheet</button>
          <button class="tab" data-tab="portfolio">Portfolio</button>
        </div>

        <div id="hmCard" class="tab-content active">
          <div style="padding: 24px; background: rgba(255, 255, 255, 0.02); border-radius: 12px;">
            <div style="font-size: 20px; font-weight: 700; color: #f0f4f8; margin-bottom: 8px;" id="hmCardName">Sarah Chen</div>
            <div style="font-size: 14px; color: #94a3b8; margin-bottom: 24px;">Frontend React • Score: 4.2</div>

            <div style="margin-bottom: 24px;">
              <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px; text-transform: uppercase;">Key Strengths</div>
              <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <span class="stack-tag" style="background: rgba(92, 214, 200, 0.15); color: #5CD6C8;">Product Sense</span>
                <span class="stack-tag" style="background: rgba(92, 214, 200, 0.15); color: #5CD6C8;">Communication</span>
              </div>
            </div>

            <div style="margin-bottom: 24px;">
              <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px; text-transform: uppercase;">Challenge Performance</div>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div>
                  <div style="font-size: 12px; color: #64748B;">Commits</div>
                  <div style="font-size: 20px; font-weight: 700; color: #4B93FF;">18</div>
                </div>
                <div>
                  <div style="font-size: 12px; color: #64748B;">Lines Added</div>
                  <div style="font-size: 20px; font-weight: 700; color: #4B93FF;">1094</div>
                </div>
              </div>
            </div>

            <div>
              <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px; text-transform: uppercase;">Notes</div>
              <div style="font-size: 14px; color: #f0f4f8; line-height: 1.6;">Excellent architecture decisions. Strong understanding of React patterns. Would be a great addition to the team.</div>
            </div>
          </div>
        </div>

        <div id="atsFactsheet" class="tab-content" style="display: none;">
          <div style="padding: 24px; background: rgba(255, 255, 255, 0.02); border-radius: 12px;">
            <div style="margin-bottom: 24px;">
              <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px;">Full Name</div>
              <div style="font-size: 14px; color: #f0f4f8;" id="atsName">Sarah Chen</div>
            </div>
            <div style="margin-bottom: 24px;">
              <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px;">Candidate ID</div>
              <div style="font-size: 14px; color: #f0f4f8;" id="atsId">MH-2841</div>
            </div>
            <div style="margin-bottom: 24px;">
              <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px;">Challenge Completed</div>
              <div style="font-size: 14px; color: #f0f4f8;">Frontend React</div>
            </div>
            <div>
              <div style="font-size: 13px; font-weight: 700; color: #94a3b8; margin-bottom: 12px;">Final Score</div>
              <div style="font-size: 24px; font-weight: 700; color: #5CD6C8;" id="atsFinalScore">4.2</div>
            </div>
          </div>
        </div>

        <div id="portfolio" class="tab-content" style="display: none;">
          <div style="padding: 24px; background: rgba(255, 255, 255, 0.02); border-radius: 12px;">
            <div style="text-align: center; padding: 40px 0;">
              <div style="font-size: 48px; margin-bottom: 16px;">📁</div>
              <div style="font-size: 14px; color: #94a3b8;">Portfolio assets will be displayed here</div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="closeFitFolioModal()">Close</button>
        <button class="btn-primary" onclick="showToast('Profile exported')">Export Profile</button>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div id="toast" style="display:none;"></div>

  <script>
    // CANDIDATE DATA
    const candidates = [
      { id: 'MH-2841', name: 'Sarah Chen', challenge: 'Frontend React', status: 'FitFolio Ready', score: 4.2, wideners: ['Product Sense', 'Communication'], stack: 3, verified: true, avatar: 'SC', pivotTime: 5, commits: 18, lines: 1094 },
      { id: 'MH-2842', name: 'Marcus Johnson', challenge: 'Frontend React', status: 'Scored', score: 3.8, wideners: ['Collaboration', 'Diagnostics'], stack: 1, verified: true, avatar: 'MJ', pivotTime: 8, commits: 14, lines: 876 },
      { id: 'MH-2843', name: 'Priya Patel', challenge: 'Frontend React', status: 'In Progress', score: null, wideners: ['Customer Empathy', 'Communication'], stack: 2, verified: false, avatar: 'PP', pivotTime: null, commits: 0, lines: 0 },
      { id: 'MH-2844', name: 'Alex Rivera', challenge: 'Data Python/SQL', status: 'FitFolio Ready', score: 4.5, wideners: ['Product Sense', 'Diagnostics'], stack: 2, verified: true, avatar: 'AR', pivotTime: 4, commits: 16, lines: 942 },
      { id: 'MH-2845', name: 'Jordan Lee', challenge: 'Frontend React', status: 'In Progress (Live)', score: null, wideners: ['Communication', 'Collaboration'], stack: 1, verified: false, avatar: 'JL', pivotTime: null, commits: 0, lines: 0 },
      { id: 'MH-2846', name: 'Tanya Williams', challenge: 'Data Python/SQL', status: 'Scored', score: 3.5, wideners: ['Customer Empathy', 'Product Sense'], stack: 1, verified: true, avatar: 'TW', pivotTime: 12, commits: 11, lines: 654 },
      { id: 'MH-2847', name: 'Raj Krishnamurthy', challenge: 'Frontend React', status: 'Invited', score: null, wideners: [], stack: 0, verified: false, avatar: 'RK', pivotTime: null, commits: 0, lines: 0 },
      { id: 'MH-2848', name: 'Elena Volkova', challenge: 'Data Python/SQL', status: 'FitFolio Ready', score: 4.0, wideners: ['Diagnostics', 'Collaboration'], stack: 3, verified: true, avatar: 'EV', pivotTime: 6, commits: 15, lines: 812 },
    ];

    let isAnonymized = false;
    let currentChallengeStep = 1;
    let proofTime = 0;
    const sessionDuration = 120;
    const pivotTime = 60;

    // HASH-BASED ROUTING
    function navigateToPage(page) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      const pageEl = document.getElementById(page);
      if (pageEl) {
        pageEl.classList.add('active');

        document.querySelectorAll('.nav-item').forEach(item => {
          item.classList.remove('active');
          if (item.dataset.page === page) item.classList.add('active');
        });

        const titles = {
          'dashboard': 'Dashboard',
          'challenges': 'Challenges',
          'live-session': 'Live Session',
          'candidates': 'Candidates',
          'scoring': 'Scoring',
          'settings': 'Settings'
        };
        document.getElementById('topbarTitle').textContent = titles[page] || 'Dashboard';
      }
    }

    function handleHashChange() {
      const hash = window.location.hash.slice(1) || 'dashboard';
      navigateToPage(hash);
    }

    // RADAR CHART DRAWING
    function drawRadarChart() {
      const canvas = document.getElementById('radarChart');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const radius = 70;
      const dimensions = ['Product Sense', 'Communication', 'Collaboration', 'Diagnostics', 'Customer Empathy'];
      const values = [
        parseInt(document.getElementById('val_ps').textContent),
        parseInt(document.getElementById('val_cm').textContent),
        parseInt(document.getElementById('val_cl').textContent),
        parseInt(document.getElementById('val_dg').textContent),
        parseInt(document.getElementById('val_ce').textContent)
      ];

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
      ctx.fillStyle = 'rgba(75, 147, 255, 0.15)';
      ctx.lineWidth = 1;

      // Draw grid
      for (let i = 1; i <= 5; i++) {
        ctx.beginPath();
        for (let j = 0; j < dimensions.length; j++) {
          const angle = (j * 2 * Math.PI) / dimensions.length - Math.PI / 2;
          const x = centerX + (radius * i / 5) * Math.cos(angle);
          const y = centerY + (radius * i / 5) * Math.sin(angle);
          if (j === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }
        ctx.closePath();
        ctx.stroke();
      }

      // Draw spokes
      for (let j = 0; j < dimensions.length; j++) {
        const angle = (j * 2 * Math.PI) / dimensions.length - Math.PI / 2;
        const x = centerX + radius * Math.cos(angle);
        const y = centerY + radius * Math.sin(angle);
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(x, y);
        ctx.stroke();
      }

      // Draw data polygon
      ctx.beginPath();
      ctx.strokeStyle = 'rgba(75, 147, 255, 0.8)';
      ctx.lineWidth = 2;
      for (let j = 0; j < dimensions.length; j++) {
        const angle = (j * 2 * Math.PI) / dimensions.length - Math.PI / 2;
        const x = centerX + (radius * values[j] / 5) * Math.cos(angle);
        const y = centerY + (radius * values[j] / 5) * Math.sin(angle);
        if (j === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.closePath();
      ctx.fill();
      ctx.stroke();
    }

    window.addEventListener('hashchange', handleHashChange);
    document.addEventListener('DOMContentLoaded', () => {
      handleHashChange();
      setTimeout(drawRadarChart, 100);

      document.querySelectorAll('.nav-item').forEach(item => {
        item.addEventListener('click', () => {
          const page = item.dataset.page;
          window.location.hash = page;
        });
      });

      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
          const tabName = tab.dataset.tab;
          document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
          tab.classList.add('active');
          document.getElementById(tabName).classList.add('active');
        });
      });
    });

    // SIDEBAR TOGGLE
    document.getElementById('toggleSidebar').addEventListener('click', function() {
      document.getElementById('sidebar').classList.toggle('collapsed');
      this.textContent = this.textContent === 'Collapse' ? 'Expand' : 'Collapse';
    });

    // MODALS
    function openCreateChallengeModal() {
      document.getElementById('createChallengeModal').classList.add('active');
      currentChallengeStep = 1;
      showChallengeStep(1);
    }

    function closeCreateChallengeModal() {
      document.getElementById('createChallengeModal').classList.remove('active');
    }

    function nextChallengeStep() {
      if (currentChallengeStep < 3) {
        currentChallengeStep++;
        showChallengeStep(currentChallengeStep);
        if (currentChallengeStep === 2) {
          // Simulate AI generation with delay then auto-advance
          setTimeout(() => {
            currentChallengeStep = 3;
            showChallengeStep(3);
            initChallengeChat();
          }, 2000);
        }
      } else {
        showToast('Challenge created successfully!');
        closeCreateChallengeModal();
      }
    }

    function showChallengeStep(step) {
      document.getElementById('challengeStep1').style.display = step === 1 ? 'block' : 'none';
      document.getElementById('challengeStep2').style.display = step === 2 ? 'block' : 'none';
      document.getElementById('challengeStep3').style.display = step === 3 ? 'block' : 'none';
      document.getElementById('challengeNextBtn').textContent = step === 3 ? 'Create' : 'Next';
    }

    // ===== AI CHALLENGE CHAT ENGINE =====
    function getSelectedRole() {
      const sel = document.querySelector('#challengeStep1 select');
      return sel ? sel.value : 'Frontend Engineer';
    }

    function initChallengeChat() {
      const msgs = document.getElementById('chatMessages');
      if (!msgs) return;
      msgs.innerHTML = '';
      const role = getSelectedRole();
      addChatMessage('ai', `I've generated a ${role} challenge based on your specifications. The assessment includes a real-world project brief, evaluation rubric with 5 dimensions, a mid-task pivot at 60 minutes, and anti-cheat verification checks. What would you like to adjust?`);
    }

    function addChatMessage(type, text) {
      const msgs = document.getElementById('chatMessages');
      const div = document.createElement('div');
      div.className = 'chat-message ' + type;
      div.textContent = text;
      msgs.appendChild(div);
      msgs.scrollTop = msgs.scrollHeight;
    }

    function sendChatMessage() {
      const input = document.getElementById('chatInput');
      const text = input.value.trim();
      if (!text) return;
      addChatMessage('user', text);
      input.value = '';

      // Show thinking indicator
      const thinking = document.createElement('div');
      thinking.className = 'chat-message thinking';
      thinking.textContent = 'Thinking...';
      thinking.id = 'thinkingMsg';
      document.getElementById('chatMessages').appendChild(thinking);

      // Generate contextual response after delay
      setTimeout(() => {
        const el = document.getElementById('thinkingMsg');
        if (el) el.remove();
        const response = generateAIResponse(text);
        addChatMessage('ai', response);
      }, 800 + Math.random() * 1200);
    }

    function generateAIResponse(input) {
      const lower = input.toLowerCase();
      const role = getSelectedRole();

      if (lower.includes('testing') || lower.includes('test')) {
        return `I've updated the rubric to weight test coverage at 20% of the total score. The challenge now requires candidates to write unit tests for at least 3 core functions and one integration test. The pivot point will also assess how they adapt their testing strategy when requirements change.`;
      }
      if (lower.includes('harder') || lower.includes('difficult') || lower.includes('senior')) {
        return `I've increased the complexity. The challenge now includes a system design component where candidates must architect a scalable solution before coding. The rubric adds a "Architecture Quality" dimension scored 1-5, and the pivot introduces a performance constraint requiring optimization of the initial implementation.`;
      }
      if (lower.includes('pivot') || lower.includes('change') || lower.includes('twist')) {
        return `The current pivot at 60 minutes introduces a new API constraint that forces candidates to refactor their data layer. I can modify this — would you like the pivot to change the UI requirements instead, add a real-time collaboration feature, or introduce a performance bottleneck that needs debugging?`;
      }
      if (lower.includes('rubric') || lower.includes('scoring') || lower.includes('criteria')) {
        return `The rubric currently evaluates 5 dimensions: Code Quality (architecture, patterns, readability), Problem Solving (approach, efficiency, edge cases), Communication (commit messages, documentation, naming), Adaptability (pivot response time, refactoring quality), and the role-specific Widener. Each is scored 1-5 with detailed descriptors. Want me to adjust the weights or add a dimension?`;
      }
      if (lower.includes('duration') || lower.includes('time') || lower.includes('long')) {
        return `The challenge is set to 120 minutes with the pivot at 60 minutes. I can adjust this — shorter sessions (90 min) test speed and prioritization, while longer ones (180 min) allow deeper architecture work. The stipend adjusts automatically based on duration. What duration works best for your hiring bar?`;
      }
      if (lower.includes('stack') || lower.includes('react') || lower.includes('python') || lower.includes('technology')) {
        return `The current tech stack is configured for ${role}. I can modify the required technologies, add specific framework constraints (e.g., "must use React hooks, no class components"), or include a library evaluation component where candidates choose and justify their tooling decisions.`;
      }
      if (lower.includes('stipend') || lower.includes('pay') || lower.includes('compensation')) {
        return `The candidate stipend is currently set at $35/hour based on the 120-minute duration ($70 total). This is competitive for the market and signals that you value candidate time. I can adjust the rate — our data shows that stipends above $30/hour increase completion rates by 40% compared to unpaid assessments.`;
      }
      if (lower.includes('brief') || lower.includes('description') || lower.includes('scenario')) {
        return `The challenge brief presents a realistic product scenario: candidates build a feature for a live application with real constraints. The brief includes user stories, acceptance criteria, a design mockup reference, and API documentation. Would you like me to make the scenario more specific to your product domain?`;
      }
      // Generic contextual response
      const responses = [
        `Good point. I've incorporated that into the challenge design. The rubric now reflects this preference, and the evaluation criteria have been updated accordingly. The brief maintains its real-world feel while addressing your feedback. Anything else you'd like to refine?`,
        `Understood. I've adjusted the challenge parameters to account for that. This change affects the scoring weights slightly — Problem Solving now carries more emphasis. The pivot scenario has also been updated to align with this direction. Want to review the updated rubric?`,
        `I've made that update. The challenge now better reflects what you're looking for in candidates. The evaluation will specifically assess this area through both the main task and the post-pivot phase. Would you like to see how this maps to the 5 Widener dimensions?`,
      ];
      return responses[Math.floor(Math.random() * responses.length)];
    }

    // ===== CANDIDATE TABLE FILTERING =====
    function filterCandidates() {
      const statusFilter = document.getElementById('filterStatus').value;
      const challengeFilter = document.getElementById('filterChallenge').value;
      const scoreFilter = document.getElementById('filterScore').value;

      const rows = document.querySelectorAll('#candidatesTableBody tr');
      let visibleCount = 0;

      rows.forEach(row => {
        const status = row.dataset.status;
        const challenge = row.dataset.challenge;
        const score = parseFloat(row.dataset.score) || 0;

        let show = true;

        if (statusFilter !== 'All' && status !== statusFilter) show = false;
        if (challengeFilter !== 'All' && challenge !== challengeFilter) show = false;
        if (scoreFilter !== 'All') {
          const minScore = parseFloat(scoreFilter);
          if (score < minScore) show = false;
        }

        row.style.display = show ? '' : 'none';
        if (show) visibleCount++;
      });
    }

    function openFitFolioModal(candidateId) {
      const candidate = candidates.find(c => c.id === candidateId);
      if (candidate && candidate.score) {
        document.getElementById('hmCardName').textContent = candidate.name;
        document.getElementById('atsName').textContent = candidate.name;
        document.getElementById('atsId').textContent = candidate.id;
        document.getElementById('atsFinalScore').textContent = candidate.score;
        document.getElementById('fitFolioModal').classList.add('active');
      }
    }

    function closeFitFolioModal() {
      document.getElementById('fitFolioModal').classList.remove('active');
    }

    // ANONYMIZATION
    function toggleAnonymization() {
      isAnonymized = !isAnonymized;
      document.getElementById('anonToggleText').textContent = isAnonymized ? 'De-anonymize' : 'Anonymize';

      candidates.forEach((candidate, index) => {
        const nameEl = document.getElementById(`name-${candidate.id}`);
        if (nameEl) {
          nameEl.textContent = isAnonymized ? `Candidate ${index + 1}` : candidate.name;
        }
      });

      showToast(isAnonymized ? 'Anonymization enabled' : 'Anonymization disabled');
    }

    // LIVE SESSION SIMULATION
    let simRunning = false;
    let simTimer = null;
    let lastCodePhase = -1;

    const codePhases = [
      { file: 'src/components/ProductCard.tsx', code: '<span class="kw">export</span> <span class="kw">interface</span> <span class="tp">Product</span> {\n  <span class="pr">id</span>: <span class="kw">string</span>;\n  <span class="pr">name</span>: <span class="kw">string</span>;\n  <span class="pr">price</span>: <span class="kw">number</span>;\n}' },
      { file: 'src/components/ProductCard.tsx', code: '<span class="kw">import</span> { <span class="tp">FC</span> } <span class="kw">from</span> <span class="st">\'react\'</span>;\n<span class="kw">import</span> { <span class="fn">formatCurrency</span> } <span class="kw">from</span> <span class="st">\'../utils\'</span>;\n\n<span class="kw">export const</span> <span class="fn">ProductCard</span>: <span class="tp">FC</span>&lt;<span class="tp">Product</span>&gt; = ({\n  id, name, price\n}) =&gt; (\n  &lt;<span class="kw">div</span> <span class="pr">className</span>=<span class="st">"card"</span>&gt;\n    &lt;<span class="kw">h3</span>&gt;{name}&lt;/<span class="kw">h3</span>&gt;\n    &lt;<span class="kw">p</span>&gt;{formatCurrency(price)}&lt;/<span class="kw">p</span>&gt;\n  &lt;/<span class="kw">div</span>&gt;\n);' },
      { file: 'src/hooks/useProducts.ts', code: '<span class="kw">import</span> { <span class="fn">useState</span>, <span class="fn">useEffect</span> } <span class="kw">from</span> <span class="st">\'react\'</span>;\n<span class="kw">import</span> { <span class="tp">Product</span> } <span class="kw">from</span> <span class="st">\'../types\'</span>;\n\n<span class="kw">export function</span> <span class="fn">useProducts</span>() {\n  <span class="kw">const</span> [products, setProducts] = <span class="fn">useState</span>&lt;<span class="tp">Product</span>[]&gt;([]);\n  <span class="kw">const</span> [loading, setLoading] = <span class="fn">useState</span>(<span class="kw">true</span>);\n\n  <span class="fn">useEffect</span>(() =&gt; {\n    <span class="fn">fetchProducts</span>().then(setProducts);\n  }, []);\n\n  <span class="kw">return</span> { products, loading };\n}' },
      { file: 'src/components/ProductGrid.tsx', code: '<span class="cm">// PIVOT: Refactor to support filtering</span>\n<span class="kw">import</span> { <span class="fn">useProducts</span> } <span class="kw">from</span> <span class="st">\'../hooks\'</span>;\n<span class="kw">import</span> { <span class="fn">ProductCard</span> } <span class="kw">from</span> <span class="st">\'./ProductCard\'</span>;\n\n<span class="kw">export const</span> <span class="fn">ProductGrid</span>: <span class="tp">FC</span>&lt;{\n  <span class="pr">filter</span>?: <span class="kw">string</span>;\n  <span class="pr">sortBy</span>?: <span class="st">\'price\'</span> | <span class="st">\'name\'</span>;\n}&gt; = ({ filter, sortBy }) =&gt; {\n  <span class="kw">const</span> { products } = <span class="fn">useProducts</span>();\n  <span class="kw">const</span> filtered = products\n    .<span class="fn">filter</span>(p =&gt; !filter || p.name.<span class="fn">includes</span>(filter))\n    .<span class="fn">sort</span>((a,b) =&gt; sortBy === <span class="st">\'price\'</span> ? a.price - b.price : 0);\n\n  <span class="kw">return</span> &lt;<span class="kw">div</span> <span class="pr">className</span>=<span class="st">"grid"</span>&gt;\n    {filtered.<span class="fn">map</span>(p =&gt; &lt;<span class="fn">ProductCard</span> <span class="pr">key</span>={p.id} {...p} /&gt;)}\n  &lt;/<span class="kw">div</span>&gt;;\n};' },
      { file: 'src/__tests__/ProductCard.test.tsx', code: '<span class="kw">import</span> { <span class="fn">render</span>, <span class="fn">screen</span> } <span class="kw">from</span> <span class="st">\'@testing-library/react\'</span>;\n<span class="kw">import</span> { <span class="fn">ProductCard</span> } <span class="kw">from</span> <span class="st">\'../components/ProductCard\'</span>;\n\n<span class="fn">describe</span>(<span class="st">\'ProductCard\'</span>, () =&gt; {\n  <span class="fn">it</span>(<span class="st">\'renders product name and price\'</span>, () =&gt; {\n    <span class="fn">render</span>(&lt;<span class="fn">ProductCard</span>\n      <span class="pr">id</span>=<span class="st">"1"</span> <span class="pr">name</span>=<span class="st">"Widget"</span> <span class="pr">price</span>={<span class="nm">29.99</span>}\n    /&gt;);\n    <span class="fn">expect</span>(<span class="fn">screen</span>.<span class="fn">getByText</span>(<span class="st">\'Widget\'</span>)).<span class="fn">toBeInTheDocument</span>();\n    <span class="fn">expect</span>(<span class="fn">screen</span>.<span class="fn">getByText</span>(<span class="st">\'$29.99\'</span>)).<span class="fn">toBeInTheDocument</span>();\n  });\n});' },
      { file: 'src/components/ProductGrid.tsx', code: '<span class="cm">// Final: added pagination + error handling</span>\n<span class="kw">export const</span> <span class="fn">ProductGrid</span>: <span class="tp">FC</span>&lt;<span class="tp">GridProps</span>&gt; = ({\n  filter, sortBy, <span class="pr">pageSize</span> = <span class="nm">12</span>\n}) =&gt; {\n  <span class="kw">const</span> { products, loading, error } = <span class="fn">useProducts</span>();\n  <span class="kw">const</span> [page, setPage] = <span class="fn">useState</span>(<span class="nm">0</span>);\n\n  <span class="kw">if</span> (error) <span class="kw">return</span> &lt;<span class="fn">ErrorBanner</span> <span class="pr">msg</span>={error} /&gt;;\n  <span class="kw">if</span> (loading) <span class="kw">return</span> &lt;<span class="fn">Skeleton</span> <span class="pr">rows</span>={<span class="nm">3</span>} /&gt;;\n\n  <span class="kw">const</span> sorted = <span class="fn">applySort</span>(products, sortBy);\n  <span class="kw">const</span> paged = sorted.<span class="fn">slice</span>(page * pageSize, (page+<span class="nm">1</span>) * pageSize);\n\n  <span class="kw">return</span> &lt;&gt;\n    &lt;<span class="kw">div</span> <span class="pr">className</span>=<span class="st">"grid"</span>&gt;\n      {paged.<span class="fn">map</span>(p =&gt; &lt;<span class="fn">ProductCard</span> <span class="pr">key</span>={p.id} {...p}/&gt;)}\n    &lt;/<span class="kw">div</span>&gt;\n    &lt;<span class="fn">Pagination</span> <span class="pr">total</span>={sorted.length} <span class="pr">page</span>={page} <span class="pr">onChange</span>={setPage}/&gt;\n  &lt;/&gt;;\n};' }
    ];

    function updateCodeEditor(phaseIndex) {
      if (phaseIndex === lastCodePhase || phaseIndex >= codePhases.length) return;
      lastCodePhase = phaseIndex;
      const phase = codePhases[phaseIndex];
      const editor = document.querySelector('.code-editor');
      if (!editor) return;
      const header = editor.querySelector('.code-editor-header');
      const titleEl = header.querySelector('.code-editor-title');
      titleEl.textContent = phase.file;
      const codeBody = editor.querySelector('.code-editor-body');
      if (codeBody) {
        codeBody.innerHTML = phase.code.replace(/\n/g, '<br>');
        codeBody.style.opacity = '0';
        setTimeout(() => { codeBody.style.opacity = '1'; }, 50);
      }
    }

    function updateLiveSession() {
      if (!simRunning) return;
      proofTime += 0.4;
      const totalSeconds = sessionDuration * 60;
      const pct = Math.min((proofTime / totalSeconds) * 100, 100);
      const minutes = Math.floor(proofTime / 60);
      const seconds = Math.floor(proofTime % 60);
      document.getElementById('elapsedTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      document.getElementById('commitCount').textContent = Math.floor(proofTime / 8);
      document.getElementById('linesAdded').textContent = Math.floor(proofTime * 8);

      // Update timeline progress
      const dot = document.getElementById('progressDot');
      const fill = document.getElementById('progressFill');
      if (dot) dot.style.left = pct + '%';
      if (fill) fill.style.width = pct + '%';

      // Update phase
      const phaseEl = document.getElementById('sessionPhase');
      if (phaseEl) {
        phaseEl.textContent = proofTime >= (pivotTime * 60) ? 'Post-Pivot' : 'Pre-Pivot';
        phaseEl.style.color = proofTime >= (pivotTime * 60) ? '#E5B84C' : '#5CD6C8';
      }

      // Update code editor at specific proof-time thresholds (seconds)
      const codeThresholds = [0, 60, 180, 360, 540, 600];
      let codePhaseIndex = 0;
      for (let i = codeThresholds.length - 1; i >= 0; i--) {
        if (proofTime >= codeThresholds[i]) { codePhaseIndex = i; break; }
      }
      updateCodeEditor(codePhaseIndex);

      if (proofTime < totalSeconds) {
        simTimer = setTimeout(updateLiveSession, 100);
      } else {
        simRunning = false;
        const btn = document.getElementById('simBtn');
        if (btn) btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg> Restart';
      }
    }

    function toggleSimulation() {
      const btn = document.getElementById('simBtn');
      if (simRunning) {
        simRunning = false;
        clearTimeout(simTimer);
        if (btn) btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg> Resume';
      } else {
        if (proofTime >= sessionDuration * 60) { proofTime = 0; }
        simRunning = true;
        if (btn) btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg> Pause';
        updateLiveSession();
      }
    }

    function resetSimulation() {
      simRunning = false;
      clearTimeout(simTimer);
      proofTime = 0;
      lastCodePhase = -1;
      updateCodeEditor(0);
      document.getElementById('elapsedTime').textContent = '0:00';
      document.getElementById('commitCount').textContent = '0';
      document.getElementById('linesAdded').textContent = '0';
      const dot = document.getElementById('progressDot');
      const fill = document.getElementById('progressFill');
      if (dot) dot.style.left = '0%';
      if (fill) fill.style.width = '0%';
      const phaseEl = document.getElementById('sessionPhase');
      if (phaseEl) { phaseEl.textContent = 'Pre-Pivot'; phaseEl.style.color = '#5CD6C8'; }
      const btn = document.getElementById('simBtn');
      if (btn) btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg> Start Simulation';
    }

    // SLIDER UPDATE
    function updateSlider(slider, valId) {
      const val = slider.value;
      document.getElementById(valId).textContent = val;
      const pct = ((val - 1) / 4) * 100;
      slider.style.background = 'linear-gradient(to right, #4B93FF 0%, #4B93FF ' + pct + '%, rgba(255,255,255,0.12) ' + pct + '%, rgba(255,255,255,0.12) 100%)';
      drawRadarChart();
    }
    // Initialize all sliders on load
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('.slider').forEach(function(s) {
        const pct = ((s.value - 1) / (s.max - s.min)) * 100;
        s.style.background = 'linear-gradient(to right, #4B93FF 0%, #4B93FF ' + pct + '%, rgba(255,255,255,0.12) ' + pct + '%, rgba(255,255,255,0.12) 100%)';
      });
    });

    // TOAST NOTIFICATION
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = 'toast success';
      toast.style.display = 'block';
      setTimeout(() => { toast.style.display = 'none'; }, 3000);
    }

    // MODAL CLOSE ON OVERLAY CLICK
    document.getElementById('createChallengeModal').addEventListener('click', (e) => {
      if (e.target === e.currentTarget) closeCreateChallengeModal();
    });
    document.getElementById('fitFolioModal').addEventListener('click', (e) => {
      if (e.target === e.currentTarget) closeFitFolioModal();
    });

    // Simulation controlled by Start button — no auto-start
  </script>
</body>
</html>
